{"ast":null,"code":"import axios from 'axios';\nconst API_BASE_URL = 'http://localhost:8000/api';\nconst api = axios.create({\n  baseURL: API_BASE_URL,\n  withCredentials: true,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// Get CSRF token from cookie\nfunction getCookie(name) {\n  let cookieValue = null;\n  if (document.cookie && document.cookie !== '') {\n    const cookies = document.cookie.split(';');\n    for (let i = 0; i < cookies.length; i++) {\n      const cookie = cookies[i].trim();\n      if (cookie.substring(0, name.length + 1) === name + '=') {\n        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\n        break;\n      }\n    }\n  }\n  return cookieValue;\n}\n\n// Add CSRF token to all requests\napi.interceptors.request.use(config => {\n  const csrfToken = getCookie('csrftoken');\n  if (csrfToken) {\n    config.headers['X-CSRFToken'] = csrfToken;\n  }\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\napi.interceptors.response.use(response => response, error => {\n  var _error$response;\n  if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 401) {\n    window.location.href = '/login';\n  }\n  return Promise.reject(error);\n});\nexport const authAPI = {\n  login: (username, password) => api.post('/auth/login/', {\n    username,\n    password\n  }),\n  logout: () => api.post('/auth/logout/'),\n  getCurrentUser: () => api.get('/auth/me/')\n};\nexport const studentAPI = {\n  getAll: () => api.get('/students/students/'),\n  getOne: id => api.get(`/students/students/${id}/`),\n  create: data => api.post('/students/students/', data),\n  update: (id, data) => api.put(`/students/students/${id}/`, data),\n  uploadCSV: (file, semester) => {\n    const formData = new FormData();\n    formData.append('file', file);\n    formData.append('semester', semester);\n    return api.post('/students/students/upload_csv/', formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    });\n  },\n  getGPA: id => api.get(`/students/students/${id}/gpa/`)\n};\nexport const factorsAPI = {\n  getAll: () => api.get('/students/factors/'),\n  create: data => api.post('/students/factors/', data),\n  update: (id, data) => api.put(`/students/factors/${id}/`, data)\n};\nexport const predictionAPI = {\n  getAll: params => api.get('/predictions/predictions/', {\n    params\n  }),\n  generate: (studentId, semester) => api.post('/predictions/predictions/generate/', {\n    student_id: studentId,\n    semester\n  }),\n  getStatistics: () => api.get('/predictions/predictions/statistics/'),\n  getAtRisk: () => api.get('/predictions/predictions/at_risk/'),\n  generateReport: id => api.post(`/predictions/predictions/${id}/report/`)\n};\nexport const dashboardAPI = {\n  getStats: () => api.get('/dashboard/')\n};\nexport default api;","map":{"version":3,"names":["axios","API_BASE_URL","api","create","baseURL","withCredentials","headers","getCookie","name","cookieValue","document","cookie","cookies","split","i","length","trim","substring","decodeURIComponent","interceptors","request","use","config","csrfToken","error","Promise","reject","response","_error$response","status","window","location","href","authAPI","login","username","password","post","logout","getCurrentUser","get","studentAPI","getAll","getOne","id","data","update","put","uploadCSV","file","semester","formData","FormData","append","getGPA","factorsAPI","predictionAPI","params","generate","studentId","student_id","getStatistics","getAtRisk","generateReport","dashboardAPI","getStats"],"sources":["/home/chegbe/Downloads/spps-project/spps/frontend/src/services/api.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_BASE_URL = 'http://localhost:8000/api';\n\nconst api = axios.create({\n  baseURL: API_BASE_URL,\n  withCredentials: true,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\n// Get CSRF token from cookie\nfunction getCookie(name) {\n  let cookieValue = null;\n  if (document.cookie && document.cookie !== '') {\n    const cookies = document.cookie.split(';');\n    for (let i = 0; i < cookies.length; i++) {\n      const cookie = cookies[i].trim();\n      if (cookie.substring(0, name.length + 1) === (name + '=')) {\n        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\n        break;\n      }\n    }\n  }\n  return cookieValue;\n}\n\n// Add CSRF token to all requests\napi.interceptors.request.use(\n  (config) => {\n    const csrfToken = getCookie('csrftoken');\n    if (csrfToken) {\n      config.headers['X-CSRFToken'] = csrfToken;\n    }\n    return config;\n  },\n  (error) => {\n    return Promise.reject(error);\n  }\n);\n\napi.interceptors.response.use(\n  (response) => response,\n  (error) => {\n    if (error.response?.status === 401) {\n      window.location.href = '/login';\n    }\n    return Promise.reject(error);\n  }\n);\n\nexport const authAPI = {\n  login: (username, password) => \n    api.post('/auth/login/', { username, password }),\n  logout: () => \n    api.post('/auth/logout/'),\n  getCurrentUser: () => \n    api.get('/auth/me/'),\n};\n\nexport const studentAPI = {\n  getAll: () => \n    api.get('/students/students/'),\n  getOne: (id) => \n    api.get(`/students/students/${id}/`),\n  create: (data) => \n    api.post('/students/students/', data),\n  update: (id, data) => \n    api.put(`/students/students/${id}/`, data),\n  uploadCSV: (file, semester) => {\n    const formData = new FormData();\n    formData.append('file', file);\n    formData.append('semester', semester);\n    return api.post('/students/students/upload_csv/', formData, {\n      headers: { 'Content-Type': 'multipart/form-data' },\n    });\n  },\n  getGPA: (id) => \n    api.get(`/students/students/${id}/gpa/`),\n};\n\nexport const factorsAPI = {\n  getAll: () => \n    api.get('/students/factors/'),\n  create: (data) => \n    api.post('/students/factors/', data),\n  update: (id, data) => \n    api.put(`/students/factors/${id}/`, data),\n};\n\nexport const predictionAPI = {\n  getAll: (params) => \n    api.get('/predictions/predictions/', { params }),\n  generate: (studentId, semester) => \n    api.post('/predictions/predictions/generate/', { student_id: studentId, semester }),\n  getStatistics: () => \n    api.get('/predictions/predictions/statistics/'),\n  getAtRisk: () => \n    api.get('/predictions/predictions/at_risk/'),\n  generateReport: (id) => \n    api.post(`/predictions/predictions/${id}/report/`),\n};\n\nexport const dashboardAPI = {\n  getStats: () => \n    api.get('/dashboard/'),\n};\n\nexport default api;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}